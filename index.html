<!DOCTYPE html>
<html lang="ko">


<head>
  <meta charset="UTF-8" />
  <title>Bubble Mindmap</title>

  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/bubble.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
</head>

<body>

  <div id="canvas"></div>

  <div class="search-wrapper">
    <button id="btnPrev" class="search-nav-btn" style="display: none;">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M15 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </button>

    <div class="search-bar">
      <select id="searchType" style="display: none;">
        <option value="all" selected>전체</option>
        <option value="name">버블 이름</option>
        <option value="title">내용 제목</option>
        <option value="body">내용 본문</option>
      </select>

      <div class="custom-select" id="customSelect">
        <div class="select-selected">전체</div>
        <div class="select-items select-hide">
          <div data-value="all" class="same-as-selected">전체</div>
          <div data-value="name">버블 이름</div>
          <div data-value="title">내용 제목</div>
          <div data-value="body">내용 본문</div>
        </div>
      </div>
      <input id="searchInput" placeholder="검색..." />
      <button id="searchBtn">
        <svg class="icon-search" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="M21 21l-4.35-4.35"></path>
        </svg>
        <svg class="icon-close" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" style="display: none;">
          <path d="M18 6L6 18M6 6l12 12"></path>
        </svg>
      </button>
    </div>

    <button id="btnNext" class="search-nav-btn" style="display: none;">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </button>
  </div>

  <button id="clearBtn" class="floating-btn" title="전체 삭제">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6"
        stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  </button>

  <button id="themeBtn" class="floating-btn" title="다크 모드 / 화이트 모드">
    <svg class="theme-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2">
      <circle cx="12" cy="12" r="5"></circle>
      <path
        d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42">
      </path>
    </svg>
  </button>

  <div class="chat-wrapper">
    <div class="chat-container">
      <button id="importBtn" title="버블 가져오기"
        style="background:none; border:none; cursor:pointer; font-size:18px; margin-right:4px;">📥</button>
      <input id="chatInput" placeholder="버블 텍스트 입력" />
      <button id="createBtn">생성</button>
    </div>
  </div>

  <div id="contextMenu" class="context-menu animate__animated animate__fadeIn">
    <div class="menu-header">메뉴</div>

    <!-- Root Specific -->
    <button id="propertyBtn" class="menu-item">속성</button>
    <button id="sortCircularBtn" class="menu-item">마인드맵 정렬</button>
    <button id="sortTreeBtn" class="menu-item">트리 정렬</button>
    <button id="shareBubbleBtn" class="menu-item" style="color:#10b981;">공유하기</button>

    <div class="menu-divider" id="rootMenuDivider"></div>

    <!-- Content Specific (Common) -->
    <button id="viewContentBtn" class="menu-item">내용 보기</button>
    <button id="addContentBtn" class="menu-item">내용 추가하기</button>
    <button id="deleteContentBtn" class="menu-item" style="color:#f59e0b;">내용 삭제</button>

    <div class="menu-divider"></div>

    <!-- Delete (Common) -->
    <button id="deleteBtn" class="menu-item delete">삭제하기</button>
  </div>

  <div id="contentModal" class="modal-overlay">
    <div class="modal-content animate__animated animate__zoomIn">
      <h3 id="contentModalHeader">내용 편집</h3>
      <input id="modalTitle" class="modal-input" placeholder="제목을 입력하세요" />
      <textarea id="modalBody" class="modal-textarea" placeholder="내용을 입력하세요"></textarea>
      <button id="closeModalBtn" class="modal-close">닫기</button>
    </div>
  </div>

  <div id="importModal" class="modal-overlay">
    <div class="modal-content animate__animated animate__zoomIn" style="width: 420px; padding: 20px;">
      <h3>버블 가져오기</h3>
      <textarea id="importCodeInput" class="modal-textarea" style="height: 100px; resize: none;"
        placeholder="여기에 코드를 붙여넣으세요..."></textarea>
      <div style="display: flex; gap: 8px; justify-content: flex-end;">
        <button id="cancelImportBtn" class="modal-close" style="background: #9ca3af;">취소</button>
        <button id="doImportBtn" class="modal-close">불러오기</button>
      </div>
    </div>
  </div>

  <div id="shareModal" class="modal-overlay">
    <div class="modal-content animate__animated animate__zoomIn" style="width: 420px; padding: 20px;">
      <h3>버블 공유하기</h3>
      <textarea id="shareCodeOutput" class="modal-textarea" style="height: 100px; resize: none;" readonly></textarea>
      <div style="display: flex; gap: 8px; justify-content: flex-end;">
        <button id="closeShareModalBtn" class="modal-close" style="background: #9ca3af;">닫기</button>
        <button id="copyShareBtn" class="modal-close">코드 복사</button>
      </div>
    </div>
  </div>

  <div id="propertyModal" class="modal-overlay">
    <div class="modal-content animate__animated animate__zoomIn" style="width: 350px;">
      <h3>버블 속성 설정</h3>

      <div style="margin-bottom: 15px;">
        <label style="display: block; font-size: 14px; margin-bottom: 5px;">버블 색상</label>
        <div id="colorPalette" style="display: flex; gap: 8px; flex-wrap: wrap;">
          <div class="color-opt" data-color="default" style="background: #e5e7eb; border: 2px solid #3b82f6;"></div>
          <div class="color-opt" data-color="#f87171" style="background: #f87171;"></div>
          <div class="color-opt" data-color="#fbbf24" style="background: #fbbf24;"></div>
          <div class="color-opt" data-color="#34d399" style="background: #34d399;"></div>
          <div class="color-opt" data-color="#60a5fa" style="background: #60a5fa;"></div>
          <div class="color-opt" data-color="#a78bfa" style="background: #a78bfa;"></div>
          <div class="color-opt" data-color="#f472b6" style="background: #f472b6;"></div>
        </div>
        <div style="margin-top: 10px;">
          <input type="text" id="hexInput" class="modal-input" placeholder="#FFFFFF"
            style="width: 100%; height: 32px; font-family: monospace;">
        </div>
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; font-size: 14px; margin-bottom: 5px;">버블 크기</label>
        <div style="display: flex; align-items: center; gap: 10px;">
          <input type="range" id="sizeRange" min="30" max="120" value="50" style="flex: 1;">
          <span id="sizeValue" style="font-size: 14px; width: 30px;">50</span>
        </div>
      </div>

      <div style="display: flex; gap: 8px; justify-content: flex-end;">
        <button id="closePropertyModalBtn" class="modal-close">확인</button>
      </div>
    </div>
  </div>

  <script type="module" src="js/app.js"></script>
</body>

</html>